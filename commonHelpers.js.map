{"version":3,"file":"commonHelpers.js","sources":["../src/js/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '41980985-8125375fe1d9f9e65ca18808e';\n\nconst refs = {\n  form: document.querySelector('.form'),\n  ulContainer: document.querySelector('.list_gallery'),\n  loader: document.querySelector('.loader'),\n};\n\nrefs.loader.style.display = 'none';\n\nrefs.form.addEventListener('submit', onButtonClick);\n\nfunction onButtonClick(evt) {\n  evt.preventDefault();\n\n  refs.ulContainer.innerHTML = '';\n  refs.loader.style.display = 'block';\n\n  const form = evt.currentTarget;\n  const input = form.elements.text.value;\n\n  serchPictureGallery(input)\n    .then(data => {\n      refs.loader.style.display = 'none';\n      const pictures = data.hits;\n      let markup = '';\n\n      for (const elem of pictures) {\n        markup += markupGallery(elem);\n      }\n\n      if (data.hits.length === 0) {\n        iziToast.error({\n          message:\n            '\"Sorry, there are no images matching your search query. Please try again!\"',\n          position: 'topRight',\n          backgroundColor: '#EF4040',\n          color: '#FAFAFB',\n        });\n      }\n\n      refs.ulContainer.innerHTML = markup;\n\n      const lightbox = new SimpleLightbox('.list_gallery a', {\n        caption: true,\n        captionsData: 'alt',\n        captionPosition: 'bottom',\n        captionDelay: 250,\n      });\n      lightbox.refresh();\n    })\n    .catch(error => {\n      console.log(error);\n      refs.loader.style.display = 'none';\n    })\n    .finally(() => {\n      form.reset();\n    });\n}\n\nfunction serchPictureGallery(picture) {\n  const urlParams = new URLSearchParams({\n    key: API_KEY,\n    q: picture,\n    image_type: 'photo',\n    image_type: 'horizontal',\n    safesearch: true,\n  });\n\n  return fetch(`${BASE_URL}?${urlParams}`).then(res => {\n    if (!res.ok) {\n      throw new Error(res.statusText);\n    }\n    return res.json();\n  });\n}\n\nfunction markupGallery({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery-item\">\n        <a\n          class=\"gallery-link\"\n          href=\"${largeImageURL}\"\n        >\n          <img\n            class=\"gallery-image\"\n            src=\"${webformatURL}\"\n            alt=\"${tags}\"\n          />\n        </a>\n        <div class=\"coments\">\n          <p class=\"comments-title\">\n            Likes<span class=\"comments-text\">${likes}</span>\n          </p>\n          <p class=\"comments-title\">\n            Views<span class=\"comments-text\">${views}</span>\n          </p>\n          <p class=\"comments-title\">\n            Comments<span class=\"comments-text\">${comments}</span>\n          </p>\n          <p class=\"comments-title\">\n            Downloads<span class=\"comments-text\">${downloads}</span>\n          </p>\n        </div>\n      </li>`;\n}\n"],"names":["BASE_URL","API_KEY","refs","onButtonClick","evt","form","input","serchPictureGallery","data","pictures","markup","elem","markupGallery","iziToast","SimpleLightbox","error","picture","urlParams","res","webformatURL","largeImageURL","tags","likes","views","comments","downloads"],"mappings":"6vBAMA,MAAMA,EAAW,2BACXC,EAAU,qCAEVC,EAAO,CACX,KAAM,SAAS,cAAc,OAAO,EACpC,YAAa,SAAS,cAAc,eAAe,EACnD,OAAQ,SAAS,cAAc,SAAS,CAC1C,EAEAA,EAAK,OAAO,MAAM,QAAU,OAE5BA,EAAK,KAAK,iBAAiB,SAAUC,CAAa,EAElD,SAASA,EAAcC,EAAK,CAC1BA,EAAI,eAAc,EAElBF,EAAK,YAAY,UAAY,GAC7BA,EAAK,OAAO,MAAM,QAAU,QAE5B,MAAMG,EAAOD,EAAI,cACXE,EAAQD,EAAK,SAAS,KAAK,MAEjCE,EAAoBD,CAAK,EACtB,KAAKE,GAAQ,CACZN,EAAK,OAAO,MAAM,QAAU,OAC5B,MAAMO,EAAWD,EAAK,KACtB,IAAIE,EAAS,GAEb,UAAWC,KAAQF,EACjBC,GAAUE,EAAcD,CAAI,EAG1BH,EAAK,KAAK,SAAW,GACvBK,EAAS,MAAM,CACb,QACE,6EACF,SAAU,WACV,gBAAiB,UACjB,MAAO,SACjB,CAAS,EAGHX,EAAK,YAAY,UAAYQ,EAEZ,IAAII,EAAe,kBAAmB,CACrD,QAAS,GACT,aAAc,MACd,gBAAiB,SACjB,aAAc,GACtB,CAAO,EACQ,QAAO,CACtB,CAAK,EACA,MAAMC,GAAS,CACd,QAAQ,IAAIA,CAAK,EACjBb,EAAK,OAAO,MAAM,QAAU,MAClC,CAAK,EACA,QAAQ,IAAM,CACbG,EAAK,MAAK,CAChB,CAAK,CACL,CAEA,SAASE,EAAoBS,EAAS,CACpC,MAAMC,EAAY,IAAI,gBAAgB,CACpC,IAAKhB,EACL,EAAGe,EACH,WAAY,QACZ,WAAY,aACZ,WAAY,EAChB,CAAG,EAED,OAAO,MAAM,GAAGhB,KAAYiB,GAAW,EAAE,KAAKC,GAAO,CACnD,GAAI,CAACA,EAAI,GACP,MAAM,IAAI,MAAMA,EAAI,UAAU,EAEhC,OAAOA,EAAI,MACf,CAAG,CACH,CAEA,SAASN,EAAc,CACrB,aAAAO,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA;AAAA;AAAA,kBAGSL;AAAA;AAAA;AAAA;AAAA,mBAICD;AAAA,mBACAE;AAAA;AAAA;AAAA;AAAA;AAAA,+CAK4BC;AAAA;AAAA;AAAA,+CAGAC;AAAA;AAAA;AAAA,kDAGGC;AAAA;AAAA;AAAA,mDAGCC;AAAA;AAAA;AAAA,YAInD"}